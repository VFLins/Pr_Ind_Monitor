---
title: "Indicador de Preços das GPUs"
output: 
  flexdashboard::flex_dashboard:
    logo: graphics-card-wh48p.png
    favicon: graphics-card-color24p.png
    navbar:
      - {icon: "ion-social-github", title: "Código",href: "https://github.com/VFLins/Prind_Monitor"}
      - {icon: "ion-android-person", title: "Sobre mim", href: "https://sites.google.com/view/vflins/"}
      - {icon: "ion-cash", title: "Me apoie", href: "https://www.paypal.com/donate/?hosted_button_id=LCT6TBWH4LN8S"}
    css: "theme.css"
---

```{r setup, include=FALSE, message=FALSE}
source("functions.R")


prices <- readRDS("data/prices.rds")
```

INICIO {data-orientation=rows}
=======================================================================

```{r pg1-setup-elements}
plot_and_title <- card(
    height="92%",
    card_title(h1("Índice dos preços de placas de vídeo")), 
    plot_indexr()
)

plot_info <- card(
    card_title(h1("Informações")),
    p("Atualizamos o banco de dados todos os dias, com cada modelo específico de placa de vídeo sendo atualizado a cada 3 dias. Aqui no índice, os preços são agregados em conjuntos de 7 dias para uma maior consistência."),
    p("Em verde vemos a média simples do melhor preço encontrado para cada chip gráfico acompanhado aqui, independentemente do modelo ou fabricante, este é nosso índice de preços."),
    p("Já em branco temos uma previsão do que esperamos para o valor do índice até o fim da próxima semana.")
)
```


Row 
-----------------------------------------------------------------------

###

```{r pg1-content1-indexplot}
plot_and_title
```

### {data-width=200}

```{r pg1-content2-indexinfo}
plot_info
```

Row {data-height=80}
-----------------------------------------------------------------------

### Tendência do índice nos últimos meses

```{r pg1-content3-valuetrend}
trend_str <- index_data
trend <- cor(trend_str$Indice, trend_str$Semana)

if (is.na(trend)){
    display_icon <- "ion-arrow-graph-up-right"
    display_message <- "Não é possível medir por enquanto..."
    display_color <- cores["fg"]
} else {
    if (trend > 0) {
        display_icon <- "ion-arrow-graph-up-right"
    } else {
        display_icon <- "ion-arrow-graph-down-right"
    }
    
    if (trend > .35) {
        display_message <- "Preços subindo"
        display_color <- cores["second"]
    } else if (trend < -.35) {
        display_message <- "Preços caindo"
        display_color <- cores["third"]
    } else {
        display_message <- "Preços estáveis"
        display_color <- cores["fg"]
    }
}
valueBox(display_message, icon=display_icon, color=display_color)
```

### Quantidade de dados usados na construção do índice

```{r pg1-content4-datacount}
valueBox(
    paste(nrow(prices), "preços coletados"),
    icon="ion-stats-bars", color=cores["fg"]
)
```

### Última atualização

```{r pg1-content5-lastupdate}
update_date <- format(max(PRICES$LastUpdate), "%d de %B de %Y")
valueBox(update_date, icon="ion-android-calendar", color=cores["fg"])
```

JOGOS {data-navmenu="PREÇO E PERFORMANCE"}
=======================================================================

Row {data-height=550 .tabset .tabset-pills}
-----------------------------------------------------------------------

```{r pg2-p1-setup}
# conteudo fhd
fhd_scatterplot <- card(
    card_title(h1("Preço x Performance (FPS médio)*")),
    plot_perf_scatter(preset="fhd_ultra"),
    card_body(p("*Fonte de dados de desempenho em jogos na página 'SOBRE'"))
)

fhd_table <- card(
    card_title(h1("Melhores modelos para este uso*")),
    card_body(plot_perf_table(preset="fhd_ultra")),
    card_body(p("*Considerando os dados de desempenho obtidos, quanto mais próximo do canto superior esquerdo do gráfico, melhor é a placa de vídeo **Menor é melhor"))
)

#conteudo qhd
qhd_scatterplot <- card(
    card_title(h1("Preço x Performance (FPS médio)*")),
    plot_perf_scatter(preset="qhd_ultra"),
    card_body(p("*Fonte de dados de desempenho em jogos na página 'SOBRE'"))
)

qhd_table <- card(
    card_title(h1("Melhores modelos para este uso*")),
    card_body(plot_perf_table(preset="qhd_ultra")),
    card_body(p("*Considerando os dados de desempenho obtidos, quanto mais próximo do canto superior esquerdo do gráfico, melhor é a placa de vídeo **Menor é melhor"))
)

#conteudo uhd
uhd_scatterplot <- card(
    card_title(h1("Preço x Performance (FPS médio)*")),
    plot_perf_scatter(preset="uhd_ultra"),
    card_body(p("*Fonte de dados de desempenho em jogos na página 'SOBRE'"))
)

uhd_table <- card(
    card_title(h1("Melhores modelos para este uso*")),
    card_body(plot_perf_table(preset="uhd_ultra")),
    card_body(p("*Considerando os dados de desempenho obtidos, quanto mais próximo do canto superior esquerdo do gráfico, melhor é a placa de vídeo **Menor é melhor"))
)
```

### Full HD (1080p)

```{r pg2-p1-1}
layout_column_wrap(width=1/2, height="90%", fhd_scatterplot, fhd_table)
```

### Quad HD (1440p)

```{r pg2-p1-2}
layout_column_wrap(width=1/2, height="90%", qhd_scatterplot, qhd_table)
```

### 4K (2160p)

```{r pg2-p1-3}
layout_column_wrap(width=1/2, height="90%", uhd_scatterplot, uhd_table)
```


JOGOS COM RAY TRACING {data-navmenu="PREÇO E PERFORMANCE"}
=======================================================================

Row {data-height=550 .tabset .tabset-pills}
-----------------------------------------------------------------------

```{r pg2-p2-setup}
# conteudo fhd
fhd_scatterplot <- card(
    card_title(h1("Preço x Performance (FPS médio)*")),
    plot_perf_scatter(price_rt_perf, "fhd_ultra"),
    card_body(p("*Fonte de dados de desempenho em jogos na página 'SOBRE'"))
)

fhd_table <- card(
    card_title(h1("Melhores modelos para este uso*")),
    card_body(plot_perf_table(price_rt_perf, "fhd_ultra")),
    card_body(p("*Considerando os dados de desempenho obtidos, quanto mais próximo do canto superior esquerdo do gráfico, melhor é a placa de vídeo **Menor é melhor"))
)

#conteudo qhd
qhd_scatterplot <- card(
    card_title(h1("Preço x Performance (FPS médio)*")),
    plot_perf_scatter(price_rt_perf, "qhd_ultra"),
    card_body(p("*Fonte de dados de desempenho em jogos na página 'SOBRE'"))
)

qhd_table <- card(
    card_title(h1("Melhores modelos para este uso*")),
    card_body(plot_perf_table(price_rt_perf, "qhd_ultra")),
    card_body(p("*Considerando os dados de desempenho obtidos, quanto mais próximo do canto superior esquerdo do gráfico, melhor é a placa de vídeo **Menor é melhor"))
)

#conteudo uhd
uhd_scatterplot <- card(
    card_title(h1("Preço x Performance (FPS médio)*")),
    plot_perf_scatter(price_rt_perf, "uhd_ultra"),
    card_body(p("*Fonte de dados de desempenho em jogos na página 'SOBRE'"))
)

uhd_table <- card(
    card_title(h1("Melhores modelos para este uso*")),
    card_body(plot_perf_table(price_rt_perf, "uhd_ultra")),
    card_body(p("*Considerando os dados de desempenho obtidos, quanto mais próximo do canto superior esquerdo do gráfico, melhor é a placa de vídeo **Menor é melhor"))
)
```


### Full HD (1080p)

```{r pg2-p2-1}
layout_column_wrap(width=1/2, height="90%", fhd_scatterplot, fhd_table)
```

### Quad HD (1440p)

```{r pg2-p2-2}
layout_column_wrap(width=1/2, height="90%", qhd_scatterplot, qhd_table)
```

### 4K (2160p)

```{r pg2-p2-3}
layout_column_wrap(width=1/2, height="90%", uhd_scatterplot, uhd_table)
```


RENDERIZAÇÃO 3D {data-navmenu="PREÇO E PERFORMANCE"}
=======================================================================

Row {data-height=550}
-----------------------------------------------------------------------

### Em construção...

RENDERIZAÇÃO VIDEO {data-navmenu="PREÇO E PERFORMANCE"}
=======================================================================

Row {data-height=550}
-----------------------------------------------------------------------

### Em construção...

TREINAMENTO DE IA {data-navmenu="PREÇO E PERFORMANCE"}
=======================================================================

Row {data-height=550}
-----------------------------------------------------------------------

### Em construção...

SOBRE
======================================================================

Ícones da logo e favicon: [prettycon - Flaticon](https://www.flaticon.com/free-icons/graphic-card)

Dados de performance em jogos (FPS médio): [Tom's Hardware](https://www.tomshardware.com/reviews/gpu-hierarchy,4388.html)
